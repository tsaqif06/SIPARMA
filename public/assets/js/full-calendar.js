$(document).ready((function(){var t=new Date,e=t.getDate(),n=t.getMonth(),r=t.getFullYear();$("#external-events div.external-event").each((function(){var t={title:$.trim($(this).text())};$(this).data("eventObject",t),$(this).draggable({zIndex:999,revert:!0,revertDuration:0})}));var a=$("#calendar").fullCalendar({header:{left:"title",center:"agendaDay,agendaWeek,month",right:"prev,next today"},editable:!0,firstDay:1,selectable:!0,defaultView:"month",axisFormat:"h:mm",columnFormat:{month:"ddd",week:"ddd d",day:"dddd M/d",agendaDay:"dddd d"},titleFormat:{month:"MMMM yyyy",week:"MMMM yyyy",day:"MMMM yyyy"},allDaySlot:!1,selectHelper:!0,dayClick:function(t,e,n,r){e&&a.fullCalendar("changeView","agendaDay").fullCalendar("gotoDate",t.getFullYear(),t.getMonth(),t.getDate())},select:function(t,e,n){n||swal({input:"text",title:"Event title:",showCancelButton:!0}).then((r=>{swal.resetDefaults(),console.log("result: "+r),r?(a.fullCalendar("renderEvent",{title:r,start:t,end:e,allDay:n},!0),swal({type:"success",title:"Agended!",html:"Event title: "+r})):swal({type:"warning",title:"Not Agended!",html:"Title is empty! "}),a.fullCalendar("unselect")}))},droppable:!0,drop:function(t,e){var n=$(this).data("eventObject"),r=$.extend({},n);r.start=t,r.allDay=e,$("#calendar").fullCalendar("renderEvent",r,!0),$("#drop-remove").is(":checked")&&$(this).remove()},events:[{title:"All Day Event",start:new Date(r,n,1)},{id:999,title:"Repeating Event",start:new Date(r,n,e-3,16,0),allDay:!1,className:"info"},{id:999,title:"Repeating Event",start:new Date(r,n,e+4,16,0),allDay:!1,className:"info"},{title:"Meeting",start:new Date(r,n,e,10,30),allDay:!1,className:"important"},{title:"Lunch",start:new Date(r,n,e,12,0),end:new Date(r,n,e,14,0),allDay:!1,className:"important"},{title:"Birthday Party",start:new Date(r,n,e+1,19,0),end:new Date(r,n,e+1,22,30),allDay:!1},{title:"Click for Google",start:new Date(r,n,28),end:new Date(r,n,29),url:"http://google.com/",className:"success"}]})})),
/*!
	* FullCalendar v1.6.4
	* Docs & License: http://arshaw.com/fullcalendar/
	* (c) 2013 Adam Shaw
	*/
function(t,e){var n={defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberCalculation:"iso",weekNumberTitle:"W",allDayDefault:!0,ignoreTimezone:!0,lazyFetching:!0,startParam:"start",endParam:"end",titleFormat:{month:"MMMM yyyy",week:"MMM d[ yyyy]{ '&#8212;'[ MMM] d yyyy}",day:"dddd, MMM d, yyyy"},columnFormat:{month:"ddd",week:"ddd M/d",day:"dddd M/d"},timeFormat:{"":"h(:mm)t"},isRTL:!1,firstDay:0,monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],buttonText:{prev:"<span class='fc-text-arrow'>&lsaquo;</span>",next:"<span class='fc-text-arrow'>&rsaquo;</span>",prevYear:"<span class='fc-text-arrow'>&laquo;</span>",nextYear:"<span class='fc-text-arrow'>&raquo;</span>",today:"today",month:"month",week:"week",day:"day"},theme:!1,buttonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e"},unselectAuto:!0,dropAccept:"*",handleWindowResize:!0},r={header:{left:"next,prev today",center:"",right:"title"},buttonText:{prev:"<span class='fc-text-arrow'>&rsaquo;</span>",next:"<span class='fc-text-arrow'>&lsaquo;</span>",prevYear:"<span class='fc-text-arrow'>&raquo;</span>",nextYear:"<span class='fc-text-arrow'>&laquo;</span>"},buttonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w"}},a=t.fullCalendar={version:"1.6.4"},o=a.views={};function i(e){t.extend(!0,n,e)}function s(n,r,a){var i=this;i.options=r,i.render=function(e){u?R()&&(P(),W(e)):function(){r.theme?"ui":"fc",n.addClass("fc"),r.isRTL?n.addClass("fc-rtl"):n.addClass("fc-ltr");r.theme&&n.addClass("ui-widget");u=t("<div class='fc-content' style='position:relative'/>").prependTo(n),s=new l(i,r),(c=s.render())&&n.prepend(c);z(r.defaultView),r.handleWindowResize&&t(window).resize(Y);N()||k()}()},i.destroy=function(){d&&(G("viewDestroy",d,d,d.element),d.triggerEventDestroy());t(window).unbind("resize",Y),s.destroy(),u.remove(),n.removeClass("fc fc-rtl ui-widget")},i.refetchEvents=function(){I(),$()},i.reportEvents=function(t){x=t,j()},i.reportEventChange=function(t){B(t)},i.rerenderEvents=B,i.changeView=z,i.select=function(t,n,r){d.select(t,n,r===e||r)},i.unselect=V,i.prev=function(){A(-1)},i.next=function(){A(1)},i.prevYear=function(){p(T,-1),A()},i.nextYear=function(){p(T,1),A()},i.today=function(){T=new Date,A()},i.gotoDate=function(t,e,n){t instanceof Date?T=C(t):S(T,t,e,n);A()},i.incrementDate=function(t,n,r){t!==e&&p(T,t);n!==e&&m(T,n);r!==e&&y(T,r);A()},i.formatDate=function(t,e){return H(t,e,r)},i.formatDates=function(t,e,n){return F(t,e,n,r)},i.getDate=function(){return C(T)},i.getView=function(){return d},i.option=function(t,n){if(n===e)return r[t];"height"!=t&&"contentHeight"!=t&&"aspectRatio"!=t||(r[t]=n,O())},i.trigger=G,f.call(i,r,a);var s,c,u,d,v,h,g,w=i.isFetchNeeded,D=i.fetchEvents,b=n[0],M=0,E=0,T=new Date,x=[];function k(){setTimeout((function(){!d.start&&N()&&A()}),0)}function R(){return n.is(":visible")}function N(){return t("body").is(":visible")}function z(e){d&&e==d.name||function(e){E++,d&&(G("viewDestroy",d,d,d.element),V(),d.triggerEventDestroy(),X(),d.element.remove(),s.deactivateButton(d.name));s.activateButton(e),d=new o[e](t("<div class='fc-view fc-view-"+e+"' style='position:relative'/>").appendTo(u),i),A(),J(),E--}(e)}function A(t){(!d.start||t||T<d.start||T>=d.end)&&R()&&W(t)}function W(t){E++,d.start&&(G("viewDestroy",d,d,d.element),V(),I()),X(),d.render(T,t||0),q(),J(),(d.afterRender||_)(),s.updateTitle(d.title),function(){var t=new Date;t>=d.start&&t<d.end?s.disableButton("today"):s.enableButton("today")}(),G("viewRender",d,d,d.element),d.trigger("viewDisplay",b),E--,!r.lazyFetching||w(d.visStart,d.visEnd)?$():j()}function O(){R()&&(V(),I(),P(),q(),j())}function P(){h=r.contentHeight?r.contentHeight:r.height?r.height-(c?c.height():0)-L(u):Math.round(u.width()/Math.max(r.aspectRatio,.5))}function q(){h===e&&P(),E++,d.setHeight(h),d.setWidth(u.width()),E--,v=n.outerWidth()}function Y(){if(!E)if(d.start){var t=++M;setTimeout((function(){t==M&&!E&&R()&&v!=(v=n.outerWidth())&&(E++,O(),d.trigger("windowResize",b),E--)}),200)}else k()}function B(t){I(),j(t)}function j(t){R()&&(d.setEventData(x),d.renderEvents(x,t),d.trigger("eventAfterAllRender"))}function I(){d.triggerEventDestroy(),d.clearEvents(),d.clearEventData()}function $(){D(d.visStart,d.visEnd)}function V(){d&&d.unselect()}function X(){u.css({width:"100%",height:u.height(),overflow:"hidden"})}function J(){u.css({width:"",height:"",overflow:""})}function G(t,e){if(r[t])return r[t].apply(e||b,Array.prototype.slice.call(arguments,2))}S(T,r.year,r.month,r.date),r.droppable&&t(document).bind("dragstart",(function(e,n){var a=e.target,o=t(a);if(!o.parents(".fc").length){var i=r.dropAccept;(t.isFunction(i)?i.call(a,o):o.is(i))&&(g=a,d.dragStart(g,e,n))}})).bind("dragstop",(function(t,e){g&&(d.dragStop(g,t,e),g=null)}))}function l(e,n){var r=this;r.render=function(){if(a=n.theme?"ui":"fc",n.header)return i=t("<table class='fc-header' style='width:100%'/>").append(t("<tr/>").append(s("left")).append(s("center")).append(s("right")))},r.destroy=function(){i.remove()},r.updateTitle=function(t){i.find("h2").html(t)},r.activateButton=function(t){i.find("span.fc-button-"+t).addClass(a+"-state-active")},r.deactivateButton=function(t){i.find("span.fc-button-"+t).removeClass(a+"-state-active")},r.disableButton=function(t){i.find("span.fc-button-"+t).addClass(a+"-state-disabled")},r.enableButton=function(t){i.find("span.fc-button-"+t).removeClass(a+"-state-disabled")};var a,i=t([]);function s(r){var i=t("<td class='fc-header-"+r+"'/>"),s=n.header[r];return s&&t.each(s.split(" "),(function(r){var s;r>0&&i.append("<span class='fc-header-space'/>"),t.each(this.split(","),(function(r,l){var c;if("title"==l)i.append("<span class='fc-header-title'><h2>&nbsp;</h2></span>"),s&&s.addClass(a+"-corner-right"),s=null;else if(e[l]?c=e[l]:o[l]&&(c=function(){d.removeClass(a+"-state-hover"),e.changeView(l)}),c){var u=n.theme?B(n.buttonIcons,l):null,f=B(n.buttonText,l),d=t("<span class='fc-button fc-button-"+l+" "+a+"-state-default'>"+(u?"<span class='fc-icon-wrap'><span class='ui-icon ui-icon-"+u+"'/></span>":f)+"</span>").click((function(){d.hasClass(a+"-state-disabled")||c()})).mousedown((function(){d.not("."+a+"-state-active").not("."+a+"-state-disabled").addClass(a+"-state-down")})).mouseup((function(){d.removeClass(a+"-state-down")})).hover((function(){d.not("."+a+"-state-active").not("."+a+"-state-disabled").addClass(a+"-state-hover")}),(function(){d.removeClass(a+"-state-hover").removeClass(a+"-state-down")})).appendTo(i);I(d),s||d.addClass(a+"-corner-left"),s=d}})),s&&s.addClass(a+"-corner-right")})),i}}t.fn.fullCalendar=function(a){if("string"==typeof a){var o,i=Array.prototype.slice.call(arguments,1);return this.each((function(){var n=t.data(this,"fullCalendar");if(n&&t.isFunction(n[a])){var r=n[a].apply(n,i);o===e&&(o=r),"destroy"==a&&t.removeData(this,"fullCalendar")}})),o!==e?o:this}var l=(a=a||{}).eventSources||[];return delete a.eventSources,a.events&&(l.push(a.events),delete a.events),a=t.extend(!0,{},n,a.isRTL||a.isRTL===e&&n.isRTL?r:{},a),this.each((function(e,n){var r=t(n),o=new s(r,a,l);r.data("fullCalendar",o),o.render()})),this},a.sourceNormalizers=[],a.sourceFetchers=[];var c={dataType:"json",cache:!1},u=1;function f(n,r){var o=this;o.isFetchNeeded=function(t,e){return!i||t<i||e>s},o.fetchEvents=function(t,e){i=t,s=e,y=[];var n=++g,r=h.length;p=r;for(var a=0;a<r;a++)D(h[a],n)},o.addEventSource=function(t){(t=M(t))&&(p++,D(t,g))},o.removeEventSource=function(e){h=t.grep(h,(function(t){return!k(t,e)})),y=t.grep(y,(function(t){return!k(t.source,e)})),d(y)},o.updateEvent=function(t){var e,n,r=y.length,a=f().defaultEventEnd,o=t.start-t._start,i=t.end?t.end-(t._end||a(t)):0;for(e=0;e<r;e++)(n=y[e])._id==t._id&&n!=t&&(n.start=new Date(+n.start+o),t.end?n.end?n.end=new Date(+n.end+i):n.end=new Date(+a(n)+i):n.end=null,n.title=t.title,n.url=t.url,n.allDay=t.allDay,n.className=t.className,n.editable=t.editable,n.color=t.color,n.backgroundColor=t.backgroundColor,n.borderColor=t.borderColor,n.textColor=t.textColor,x(n));x(t),d(y)},o.renderEvent=function(t,e){x(t),t.source||(e&&(v.events.push(t),t.source=v),y.push(t));d(y)},o.removeEvents=function(e){if(e){if(!t.isFunction(e)){var n=e+"";e=function(t){return t._id==n}}y=t.grep(y,e,!0);for(r=0;r<h.length;r++)t.isArray(h[r].events)&&(h[r].events=t.grep(h[r].events,e,!0))}else{y=[];for(var r=0;r<h.length;r++)t.isArray(h[r].events)&&(h[r].events=[])}d(y)},o.clientEvents=function(e){if(t.isFunction(e))return t.grep(y,e);if(e)return e+="",t.grep(y,(function(t){return t._id==e}));return y},o.normalizeEvent=x;for(var i,s,l=o.trigger,f=o.getView,d=o.reportEvents,v={events:[]},h=[v],g=0,p=0,m=0,y=[],w=0;w<r.length;w++)M(r[w]);function D(e,r){b(e,(function(a){if(r==g){if(a){n.eventDataTransform&&(a=t.map(a,n.eventDataTransform)),e.eventDataTransform&&(a=t.map(a,e.eventDataTransform));for(var o=0;o<a.length;o++)a[o].source=e,x(a[o]);y=y.concat(a)}--p||d(y)}}))}function b(e,r){var o,l,u=a.sourceFetchers;for(o=0;o<u.length;o++){if(!0===(l=u[o](e,i,s,r)))return;if("object"==typeof l)return void b(l,r)}var f=e.events;if(f)t.isFunction(f)?(E(),f(C(i),C(s),(function(t){r(t),S()}))):t.isArray(f)?r(f):r();else if(e.url){var d,v=e.success,h=e.error,g=e.complete;d=t.isFunction(e.data)?e.data():e.data;var p=t.extend({},d||{}),m=J(e.startParam,n.startParam),y=J(e.endParam,n.endParam);m&&(p[m]=Math.round(+i/1e3)),y&&(p[y]=Math.round(+s/1e3)),E(),t.ajax(t.extend({},c,e,{data:p,success:function(e){e=e||[];var n=X(v,this,arguments);t.isArray(n)&&(e=n),r(e)},error:function(){X(h,this,arguments),r()},complete:function(){X(g,this,arguments),S()}}))}else r()}function M(e){if(t.isFunction(e)||t.isArray(e)?e={events:e}:"string"==typeof e&&(e={url:e}),"object"==typeof e)return function(t){t.className?"string"==typeof t.className&&(t.className=t.className.split(/\s+/)):t.className=[];for(var e=a.sourceNormalizers,n=0;n<e.length;n++)e[n](t)}(e),h.push(e),e}function E(){m++||l("loading",null,!0,f())}function S(){--m||l("loading",null,!1,f())}function x(t){var r=t.source||{},a=J(r.ignoreTimezone,n.ignoreTimezone);t._id=t._id||(t.id===e?"_fc"+u++:t.id+""),t.date&&(t.start||(t.start=t.date),delete t.date),t._start=C(t.start=T(t.start,a)),t.end=T(t.end,a),t.end&&t.end<=t.start&&(t.end=null),t._end=t.end?C(t.end):null,t.allDay===e&&(t.allDay=J(r.allDayDefault,n.allDayDefault)),t.className?"string"==typeof t.className&&(t.className=t.className.split(/\s+/)):t.className=[]}function k(t,e){return t&&e&&H(t)==H(e)}function H(t){return("object"==typeof t?t.events||t.url:"")||t}}a.addDays=y,a.cloneDate=C,a.parseDate=T,a.parseISO8601=x,a.parseTime=k,a.formatDate=H,a.formatDates=F;var d=["sun","mon","tue","wed","thu","fri","sat"],v=864e5,h=36e5,g=6e4;function p(t,e,n){return t.setFullYear(t.getFullYear()+e),n||b(t),t}function m(t,e,n){if(+t){var r=t.getMonth()+e,a=C(t);for(a.setDate(1),a.setMonth(r),t.setMonth(r),n||b(t);t.getMonth()!=a.getMonth();)t.setDate(t.getDate()+(t<a?1:-1))}return t}function y(t,e,n){if(+t){var r=t.getDate()+e,a=C(t);a.setHours(9),a.setDate(r),t.setDate(r),n||b(t),w(t,a)}return t}function w(t,e){if(+t)for(;t.getDate()!=e.getDate();)t.setTime(+t+(t<e?1:-1)*h)}function D(t,e){return t.setMinutes(t.getMinutes()+e),t}function b(t){return t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0),t}function C(t,e){return e?b(new Date(+t)):new Date(+t)}function M(){var t,e=0;do{t=new Date(1970,e++,1)}while(t.getHours());return t}function E(t,e){return Math.round((C(t,!0)-C(e,!0))/v)}function S(t,n,r,a){n!==e&&n!=t.getFullYear()&&(t.setDate(1),t.setMonth(0),t.setFullYear(n)),r!==e&&r!=t.getMonth()&&(t.setDate(1),t.setMonth(r)),a!==e&&t.setDate(a)}function T(t,n){return"object"==typeof t?t:"number"==typeof t?new Date(1e3*t):"string"==typeof t?t.match(/^\d+(\.\d+)?$/)?new Date(1e3*parseFloat(t)):(n===e&&(n=!0),x(t,n)||(t?new Date(t):null)):null}function x(t,e){var n=t.match(/^([0-9]{4})(-([0-9]{2})(-([0-9]{2})([T ]([0-9]{2}):([0-9]{2})(:([0-9]{2})(\.([0-9]+))?)?(Z|(([-+])([0-9]{2})(:?([0-9]{2}))?))?)?)?)?$/);if(!n)return null;var r=new Date(n[1],0,1);if(e||!n[13]){var a=new Date(n[1],0,1,9,0);n[3]&&(r.setMonth(n[3]-1),a.setMonth(n[3]-1)),n[5]&&(r.setDate(n[5]),a.setDate(n[5])),w(r,a),n[7]&&r.setHours(n[7]),n[8]&&r.setMinutes(n[8]),n[10]&&r.setSeconds(n[10]),n[12]&&r.setMilliseconds(1e3*Number("0."+n[12])),w(r,a)}else if(r.setUTCFullYear(n[1],n[3]?n[3]-1:0,n[5]||1),r.setUTCHours(n[7]||0,n[8]||0,n[10]||0,n[12]?1e3*Number("0."+n[12]):0),n[14]){var o=60*Number(n[16])+(n[18]?Number(n[18]):0);o*="-"==n[15]?1:-1,r=new Date(+r+60*o*1e3)}return r}function k(t){if("number"==typeof t)return 60*t;if("object"==typeof t)return 60*t.getHours()+t.getMinutes();var e=t.match(/(\d+)(?::(\d+))?\s*(\w+)?/);if(e){var n=parseInt(e[1],10);return e[3]&&(n%=12,"p"==e[3].toLowerCase().charAt(0)&&(n+=12)),60*n+(e[2]?parseInt(e[2],10):0)}}function H(t,e,n){return F(t,null,e,n)}function F(t,e,r,a){a=a||n;var o,i,s,l,c=t,u=e,f=r.length,d="";for(o=0;o<f;o++)if("'"==(i=r.charAt(o))){for(s=o+1;s<f;s++)if("'"==r.charAt(s)){c&&(d+=s==o+1?"'":r.substring(o+1,s),o=s);break}}else if("("==i){for(s=o+1;s<f;s++)if(")"==r.charAt(s)){var v=H(c,r.substring(o+1,s),a);parseInt(v.replace(/\D/,""),10)&&(d+=v),o=s;break}}else if("["==i){for(s=o+1;s<f;s++)if("]"==r.charAt(s)){var h=r.substring(o+1,s);(v=H(c,h,a))!=H(u,h,a)&&(d+=v),o=s;break}}else if("{"==i)c=e,u=t;else if("}"==i)c=t,u=e;else{for(s=f;s>o;s--)if(l=R[r.substring(o,s)]){c&&(d+=l(c,a)),o=s-1;break}s==o&&c&&(d+=i)}return d}var R={s:function(t){return t.getSeconds()},ss:function(t){return Y(t.getSeconds())},m:function(t){return t.getMinutes()},mm:function(t){return Y(t.getMinutes())},h:function(t){return t.getHours()%12||12},hh:function(t){return Y(t.getHours()%12||12)},H:function(t){return t.getHours()},HH:function(t){return Y(t.getHours())},d:function(t){return t.getDate()},dd:function(t){return Y(t.getDate())},ddd:function(t,e){return e.dayNamesShort[t.getDay()]},dddd:function(t,e){return e.dayNames[t.getDay()]},M:function(t){return t.getMonth()+1},MM:function(t){return Y(t.getMonth()+1)},MMM:function(t,e){return e.monthNamesShort[t.getMonth()]},MMMM:function(t,e){return e.monthNames[t.getMonth()]},yy:function(t){return(t.getFullYear()+"").substring(2)},yyyy:function(t){return t.getFullYear()},t:function(t){return t.getHours()<12?"a":"p"},tt:function(t){return t.getHours()<12?"am":"pm"},T:function(t){return t.getHours()<12?"A":"P"},TT:function(t){return t.getHours()<12?"AM":"PM"},u:function(t){return H(t,"yyyy-MM-dd'T'HH:mm:ss'Z'")},S:function(t){var e=t.getDate();return e>10&&e<20?"th":["st","nd","rd"][e%10-1]||"th"},w:function(t,e){return e.weekNumberCalculation(t)},W:function(t){return(n=new Date(t.getTime())).setDate(n.getDate()+4-(n.getDay()||7)),e=n.getTime(),n.setMonth(0),n.setDate(1),Math.floor(Math.round((e-n)/864e5)/7)+1;var e,n}};function N(t){return t.end?(e=t.end,n=t.allDay,e=C(e),n||e.getHours()||e.getMinutes()?y(e,1):b(e)):y(C(t.start),1);var e,n}function z(n,r,a){n.unbind("mouseover").mouseover((function(n){for(var o,i,s,l=n.target;l!=this;)o=l,l=l.parentNode;(i=o._fci)!==e&&(o._fci=e,s=r[i],a(s.event,s.element,s),t(n.target).trigger(n)),n.stopPropagation()}))}function A(e,n,r){for(var a,o=0;o<e.length;o++)(a=t(e[o])).width(Math.max(0,n-O(a,r)))}function W(e,n,r){for(var a,o=0;o<e.length;o++)(a=t(e[o])).height(Math.max(0,n-L(a,r)))}function O(e,n){return function(e){return(parseFloat(t.css(e[0],"paddingLeft",!0))||0)+(parseFloat(t.css(e[0],"paddingRight",!0))||0)}(e)+function(e){return(parseFloat(t.css(e[0],"borderLeftWidth",!0))||0)+(parseFloat(t.css(e[0],"borderRightWidth",!0))||0)}(e)+(n?function(e){return(parseFloat(t.css(e[0],"marginLeft",!0))||0)+(parseFloat(t.css(e[0],"marginRight",!0))||0)}(e):0)}function L(e,n){return function(e){return(parseFloat(t.css(e[0],"paddingTop",!0))||0)+(parseFloat(t.css(e[0],"paddingBottom",!0))||0)}(e)+function(e){return(parseFloat(t.css(e[0],"borderTopWidth",!0))||0)+(parseFloat(t.css(e[0],"borderBottomWidth",!0))||0)}(e)+(n?function(e){return(parseFloat(t.css(e[0],"marginTop",!0))||0)+(parseFloat(t.css(e[0],"marginBottom",!0))||0)}(e):0)}function _(){}function P(t,e){return t-e}function q(t){return Math.max.apply(Math,t)}function Y(t){return(t<10?"0":"")+t}function B(t,n){if(t[n]!==e)return t[n];for(var r,a=n.split(/(?=[A-Z])/),o=a.length-1;o>=0;o--)if((r=t[a[o].toLowerCase()])!==e)return r;return t[""]}function j(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function I(t){t.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",(function(){return!1}))}function $(t){t.children().removeClass("fc-first fc-last").filter(":first-child").addClass("fc-first").end().filter(":last-child").addClass("fc-last")}function V(t,e){var n=t.source||{},r=t.color,a=n.color,o=e("eventColor"),i=t.backgroundColor||r||n.backgroundColor||a||e("eventBackgroundColor")||o,s=t.borderColor||r||n.borderColor||a||e("eventBorderColor")||o,l=t.textColor||n.textColor||e("eventTextColor"),c=[];return i&&c.push("background-color:"+i),s&&c.push("border-color:"+s),l&&c.push("color:"+l),c.join(";")}function X(e,n,r){if(t.isFunction(e)&&(e=[e]),e){var a,o;for(a=0;a<e.length;a++)o=e[a].apply(n,r)||o;return o}}function J(){for(var t=0;t<arguments.length;t++)if(arguments[t]!==e)return arguments[t]}function G(e,n,r){var a=this;a.renderBasic=function(n,r,p){D=n,M=r,E=p,F=O("theme")?"ui":"fc",R=O("columnFormat"),N=O("weekNumbers"),z=O("weekNumberTitle"),W="iso"!=O("weekNumberCalculation")?"w":"W",l||(g=t("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(e));!function(){var n=function(){var t="<table class='fc-border-separate' style='width:100%' cellspacing='0'>"+function(){var t,e,n=F+"-widget-header",r="";r+="<thead><tr>",N&&(r+="<th class='fc-week-number "+n+"'>"+j(z)+"</th>");for(t=0;t<M;t++)e=B(0,t),r+="<th class='fc-day-header fc-"+d[e.getDay()]+" "+n+"'>"+j(J(e,R))+"</th>";return r+="</tr></thead>",r}()+function(){var t,e,n,r=F+"-widget-content",a="";for(a+="<tbody>",t=0;t<D;t++){for(a+="<tr class='fc-week'>",N&&(n=B(t,0),a+="<td class='fc-week-number "+r+"'><div>"+j(J(n,W))+"</div></td>"),e=0;e<M;e++)a+=G(n=B(t,e));a+="</tr>"}return a+="</tbody>",a}()+"</table>";return t}();o&&o.remove();o=t(n).appendTo(e),i=o.find("thead"),s=i.find(".fc-day-header"),l=o.find("tbody"),c=l.find("tr"),u=l.find(".fc-day"),f=c.find("td:first-child"),v=c.eq(0).find(".fc-day > div"),h=c.eq(0).find(".fc-day-content > div"),$(i.add(i.find("tr"))),$(c),c.eq(0).addClass("fc-first"),c.filter(":last").addClass("fc-last"),u.each((function(e,n){var r=B(Math.floor(e/M),e%M);_("dayRender",a,r,t(n))})),Z(u)}()},a.setHeight=function(e){var n,r,a,o=e-i.height();"variable"==O("weekMode")?n=r=Math.floor(o/(1==D?2:6)):(n=Math.floor(o/D),r=o-n*(D-1));f.each((function(e,o){e<D&&(a=t(o)).find("> div").css("min-height",(e==D-1?r:n)-L(a))}))},a.setWidth=function(t){p=t,k.clear(),H.clear(),w=0,N&&(w=i.find("th.fc-week-number").outerWidth());m=Math.floor((p-w)/M),A(s.slice(0,-1),m)},a.renderDayOverlay=K,a.defaultSelectionEnd=function(t,e){return C(t)},a.renderSelection=function(t,e,n){K(t,y(C(e),1),!0)},a.clearSelection=function(){q()},a.reportDayClick=function(t,e,n){var r=V(t),a=u[r.row*M+r.col];_("dayClick",a,t,e,n)},a.dragStart=function(t,e,n){T.start((function(t){q(),t&&tt(t.row,t.col,t.row,t.col)}),e)},a.dragStop=function(t,e,n){var r=T.stop();if(q(),r){var a=B(r);_("drop",t,a,!0,e,n)}},a.defaultEventEnd=function(t){return C(t.start)},a.getHoverListener=function(){return T},a.colLeft=function(t){return k.left(t)},a.colRight=function(t){return k.right(t)},a.colContentLeft=function(t){return H.left(t)},a.colContentRight=function(t){return H.right(t)},a.getIsCellAllDay=function(){return!0},a.allDayRow=function(t){return c.eq(t)},a.getRowCnt=function(){return D},a.getColCnt=function(){return M},a.getColWidth=function(){return m},a.getDaySegmentContainer=function(){return g},ot.call(a,e,n,r),ft.call(a),ut.call(a),U.call(a);var o,i,s,l,c,u,f,v,h,g,p,m,w,D,M,E,S,T,k,H,F,R,N,z,W,O=a.opt,_=a.trigger,P=a.renderOverlay,q=a.clearOverlays,Y=a.daySelectionMousedown,B=a.cellToDate,V=a.dateToCell,X=a.rangeToSegments,J=n.formatDate;function G(t){var e=F+"-widget-content",n=a.start.getMonth(),r=b(new Date),o="",i=["fc-day","fc-"+d[t.getDay()],e];return t.getMonth()!=n&&i.push("fc-other-month"),+t==+r?i.push("fc-today",F+"-state-highlight"):t<r?i.push("fc-past"):i.push("fc-future"),o+="<td class='"+i.join(" ")+"' data-date='"+J(t,"yyyy-MM-dd")+"'><div>",E&&(o+="<div class='fc-day-number'>"+t.getDate()+"</div>"),o+="<div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>"}function Z(t){t.click(Q).mousedown(Y)}function Q(e){if(!O("selectable")){var n=x(t(this).data("date"));_("dayClick",this,n,!0,e)}}function K(t,e,n){n&&S.build();for(var r=X(t,e),a=0;a<r.length;a++){var o=r[a];Z(tt(o.row,o.leftCol,o.row,o.rightCol))}}function tt(t,n,r,a){var o=S.rect(t,n,r,a,e);return P(o,e)}I(e.addClass("fc-grid")),S=new dt((function(e,n){var r,a,o;s.each((function(e,i){r=t(i),a=r.offset().left,e&&(o[1]=a),o=[a],n[e]=o})),o[1]=a+r.outerWidth(),c.each((function(n,i){n<D&&(r=t(i),a=r.offset().top,n&&(o[1]=a),o=[a],e[n]=o)})),o[1]=a+r.outerHeight()})),T=new vt(S),k=new ht((function(t){return v.eq(t)})),H=new ht((function(t){return h.eq(t)}))}function U(){var t=this;t.renderEvents=function(e,n){t.renderDayEvents(e,n)},t.clearEvents=function(){t.getDaySegmentContainer().empty()},it.call(t)}function Z(n,r,a){var o=this;o.renderAgenda=function(e){V=e,function(){K=lt("theme")?"ui":"fc",tt=lt("isRTL"),et=k(lt("minTime")),nt=k(lt("maxTime")),rt=lt("columnFormat"),at=lt("weekNumbers"),it=lt("weekNumberTitle"),st="iso"!=lt("weekNumberCalculation")?"w":"W";q=lt("snapMinutes")||lt("slotMinutes")}(),i?Tt():function(){var e,r,a,o,i,s=K+"-widget-header",l=K+"-widget-content",c=lt("slotMinutes")%15==0;Tt(),p=t("<div style='position:absolute;z-index:2;left:0;width:100%'/>").appendTo(n),lt("allDaySlot")?(m=t("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(p),e="<table style='width:100%' class='fc-agenda-allday' cellspacing='0'><tr><th class='"+s+" fc-agenda-axis'>"+lt("allDayText")+"</th><td><div class='fc-day-content'><div style='position:relative'/></div></td><th class='"+s+" fc-agenda-gutter'>&nbsp;</th></tr></table>",w=t(e).appendTo(p),xt((E=w.find("tr")).find("td")),p.append("<div class='fc-agenda-divider "+s+"'><div class='fc-agenda-divider-inner'/></div>")):m=t([]);for(S=t("<div style='position:absolute;width:100%;overflow-x:hidden;overflow-y:auto'/>").appendTo(p),T=t("<div style='position:relative;width:100%;overflow:hidden'/>").appendTo(S),x=t("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(T),e="<table class='fc-agenda-slots' style='width:100%' cellspacing='0'><tbody>",r=M(),o=D(C(r),nt),D(r,et),X=0,a=0;r<o;a++)e+="<tr class='fc-slot"+a+" "+((i=r.getMinutes())?"fc-minor":"")+"'><th class='fc-agenda-axis "+s+"'>"+(c&&i?"&nbsp;":Et(r,lt("axisFormat")))+"</th><td class='"+l+"'><div style='position:relative'>&nbsp;</div></td></tr>",D(r,lt("slotMinutes")),X++;kt((H=t(e+="</tbody></table>").appendTo(T)).find("td"))}()},o.setWidth=function(e){e,U.clear(),Z.clear();var n=s.find("th:first");w&&(n=n.add(w.find("th:first")));n=n.add(H.find("th:first")),N=0,A(n.width("").each((function(e,n){N=Math.max(N,t(n).outerWidth())})),N);var r=i.find(".fc-agenda-gutter");w&&(r=r.add(w.find("th.fc-agenda-gutter")));var a=S[0].clientWidth;(O=S.width()-a)?(A(r,O),r.show().prev().removeClass("fc-last")):r.hide().prev().addClass("fc-last");z=Math.floor((a-N)/V),A(l.slice(0,-1),z)},o.setHeight=function(t){t===e&&(t=R);R=t,St={};var n=c.position().top,r=S.position().top,a=Math.min(t-n,H.height()+r+1);g.height(a-L(h)),p.css("top",n),S.height(a-r-1),_=H.find("tr:first").height()+1,Y=lt("slotMinutes")/q,B=_/Y},o.afterRender=function(){!function(){var t=M(),e=C(t);e.setHours(lt("firstHour"));var n=Wt(t,e)+1;function r(){S.scrollTop(n)}r(),setTimeout(r,0)}()},o.defaultEventEnd=function(t){var e=C(t.start);if(t.allDay)return e;return D(e,lt("defaultEventMinutes"))},o.timePosition=Wt,o.getIsCellAllDay=zt,o.allDayRow=function(t){return E},o.getCoordinateGrid=function(){return J},o.getHoverListener=function(){return G},o.colLeft=function(t){return U.left(t)},o.colRight=function(t){return U.right(t)},o.colContentLeft=function(t){return Z.left(t)},o.colContentRight=function(t){return Z.right(t)},o.getDaySegmentContainer=function(){return m},o.getSlotSegmentContainer=function(){return x},o.getMinMinute=function(){return et},o.getMaxMinute=function(){return nt},o.getSlotContainer=function(){return T},o.getRowCnt=function(){return 1},o.getColCnt=function(){return V},o.getColWidth=function(){return z},o.getSnapHeight=function(){return B},o.getSnapMinutes=function(){return q},o.defaultSelectionEnd=function(t,e){if(e)return C(t);return D(C(t),lt("slotMinutes"))},o.renderDayOverlay=Ft,o.renderSelection=function(t,e,n){n?lt("allDaySlot")&&Ft(t,y(C(e),1),!0):Ot(t,e)},o.clearSelection=Lt,o.reportDayClick=Pt,o.dragStart=function(t,e,n){G.start((function(t){if(pt(),t)if(zt(t))Rt(t.row,t.col,t.row,t.col);else{var e=At(t);Nt(e,D(C(e),lt("defaultEventMinutes")))}}),e)},o.dragStop=function(t,e,n){var r=G.stop();pt(),r&&ct("drop",t,At(r),zt(r),e,n)},ot.call(o,n,r,a),ft.call(o),ut.call(o),Q.call(o);var i,s,l,c,u,f,v,h,g,p,m,w,E,S,T,x,H,F,R,N,z,O,_,q,Y,B,V,X,J,G,U,Z,K,tt,et,nt,rt,at,it,st,lt=o.opt,ct=o.trigger,gt=o.renderOverlay,pt=o.clearOverlays,mt=o.reportSelection,yt=o.unselect,wt=o.daySelectionMousedown,Dt=o.slotSegHtml,bt=o.cellToDate,Ct=o.dateToCell,Mt=o.rangeToSegments,Et=r.formatDate,St={};function Tt(){var e=function(){var t="<table style='width:100%' class='fc-agenda-days fc-border-separate' cellspacing='0'>"+function(){var t,e,n,r=K+"-widget-header",a="";a+="<thead><tr>",at?(t=bt(0,0),e=Et(t,st),tt?e+=it:e=it+e,a+="<th class='fc-agenda-axis fc-week-number "+r+"'>"+j(e)+"</th>"):a+="<th class='fc-agenda-axis "+r+"'>&nbsp;</th>";for(n=0;n<V;n++)t=bt(0,n),a+="<th class='fc-"+d[t.getDay()]+" fc-col"+n+" "+r+"'>"+j(Et(t,rt))+"</th>";return a+="<th class='fc-agenda-gutter "+r+"'>&nbsp;</th></tr></thead>",a}()+function(){var t,e,n,r,a=K+"-widget-header",o=K+"-widget-content",i=b(new Date),s="";for(s+="<tbody><tr><th class='fc-agenda-axis "+a+"'>&nbsp;</th>",n="",e=0;e<V;e++)t=bt(0,e),r=["fc-col"+e,"fc-"+d[t.getDay()],o],+t==+i?r.push(K+"-state-highlight","fc-today"):t<i?r.push("fc-past"):r.push("fc-future"),n+="<td class='"+r.join(" ")+"'><div><div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>";return s+=n,s+="<td class='fc-agenda-gutter "+o+"'>&nbsp;</td></tr></tbody>",s}()+"</table>";return t}();i&&i.remove(),i=t(e).appendTo(n),s=i.find("thead"),l=s.find("th").slice(1,-1),c=i.find("tbody"),u=c.find("td").slice(0,-1),f=u.find("> div"),v=u.find(".fc-day-content > div"),h=u.eq(0),g=f.eq(0),$(s.add(s.find("tr"))),$(c.add(c.find("tr")))}function xt(t){t.click(Ht).mousedown(wt)}function kt(t){t.click(Ht).mousedown(_t)}function Ht(t){if(!lt("selectable")){var e=Math.min(V-1,Math.floor((t.pageX-i.offset().left-N)/z)),n=bt(0,e),r=this.parentNode.className.match(/fc-slot(\d+)/);if(r){var a=parseInt(r[1])*lt("slotMinutes"),o=Math.floor(a/60);n.setHours(o),n.setMinutes(a%60+et),ct("dayClick",u[e],n,!1,t)}else ct("dayClick",u[e],n,!0,t)}}function Ft(t,e,n){n&&J.build();for(var r=Mt(t,e),a=0;a<r.length;a++){var o=r[a];xt(Rt(o.row,o.leftCol,o.row,o.rightCol))}}function Rt(t,e,n,r){var a=J.rect(t,e,n,r,p);return gt(a,p)}function Nt(t,e){for(var n=0;n<V;n++){var r=bt(0,n),a=y(C(r),1),o=new Date(Math.max(r,t)),i=new Date(Math.min(a,e));if(o<i){var s=J.rect(0,n,0,n,T),l=Wt(r,o),c=Wt(r,i);s.top=l,s.height=c-l,kt(gt(s,T))}}}function zt(t){return lt("allDaySlot")&&!t.row}function At(t){var e=bt(0,t.col),n=t.row;return lt("allDaySlot")&&n--,n>=0&&D(e,et+n*q),e}function Wt(t,n){if(t=C(t,!0),n<D(C(t),et))return 0;if(n>=D(C(t),nt))return H.height();var r=lt("slotMinutes"),a=60*n.getHours()+n.getMinutes()-et,o=Math.floor(a/r),i=St[o];return i===e&&(i=St[o]=H.find("tr").eq(o).find("td div")[0].offsetTop),Math.max(0,Math.round(i-1+_*(a%r/r)))}function Ot(e,n){var r=lt("selectHelper");if(J.build(),r){var a=Ct(e).col;if(a>=0&&a<V){var o=J.rect(0,a,0,a,T),i=Wt(e,e),s=Wt(e,n);if(s>i){if(o.top=i,o.height=s-i,o.left+=2,o.width-=5,t.isFunction(r)){var l=r(e,n);l&&(o.position="absolute",F=t(l).css(o).appendTo(T))}else o.isStart=!0,o.isEnd=!0,(F=t(Dt({title:"",start:e,end:n,className:["fc-select-helper"],editable:!1},o))).css("opacity",lt("dragOpacity"));F&&(kt(F),T.append(F),A(F,o.width,!0),W(F,o.height,!0))}}}else Nt(e,n)}function Lt(){pt(),F&&(F.remove(),F=null)}function _t(e){var n;1==e.which&&lt("selectable")&&(yt(e),G.start((function(t,e){if(Lt(),t&&t.col==e.col&&!zt(t)){var r=At(e),a=At(t);Ot((n=[r,D(C(r),q),a,D(C(a),q)].sort(P))[0],n[3])}else n=null}),e),t(document).one("mouseup",(function(t){G.stop(),n&&(+n[0]==+n[1]&&Pt(n[0],!1,t),mt(n[0],n[3],!1,t))})))}function Pt(t,e,n){ct("dayClick",u[Ct(t).col],t,e,n)}I(n.addClass("fc-agenda")),J=new dt((function(e,n){var r,a,o;l.each((function(e,i){r=t(i),a=r.offset().left,e&&(o[1]=a),o=[a],n[e]=o})),o[1]=a+r.outerWidth(),lt("allDaySlot")&&(a=(r=E).offset().top,e[0]=[a,a+r.outerHeight()]);var i=T.offset().top,s=S.offset().top,c=s+S.outerHeight();function u(t){return Math.max(s,Math.min(c,t))}for(var f=0;f<X*Y;f++)e.push([u(i+B*f),u(i+B*(f+1))])})),G=new vt(J),U=new ht((function(t){return f.eq(t)})),Z=new ht((function(t){return v.eq(t)}))}function Q(){var n=this;n.renderEvents=function(n,o){var i,s=n.length,l=[],u=[];for(i=0;i<s;i++)n[i].allDay?l.push(n[i]):u.push(n[i]);r("allDaySlot")&&(B(l,o),c());!function(n,o){var i,s,l,c,u,d,v,h,g,m,y,D,C,M,E,S,T=n.length,x="",k=f(),H=r("isRTL");for(i=0;i<T;i++)l=(s=n[i]).event,c=p(s.start,s.start),u=p(s.start,s.end),d=w(s.col),v=b(s.col),g=(h=(v-=.025*(h=v-d))-d)*(s.forwardCoord-s.backwardCoord),r("slotEventOverlap")&&(g=Math.max(2*(g-10),g)),H?m=(y=v-s.backwardCoord*h)-g:y=(m=d+s.backwardCoord*h)+g,m=Math.max(m,d),g=(y=Math.min(y,v))-m,s.top=c,s.left=m,s.outerWidth=g,s.outerHeight=u-c,x+=U(l,s);for(k[0].innerHTML=x,D=k.children(),i=0;i<T;i++)l=(s=n[i]).event,C=t(D[i]),!1===(M=a("eventRender",l,l,C))?C.remove():(M&&!0!==M&&(C.remove(),C=t(M).css({position:"absolute",top:s.top,left:s.left}).appendTo(k)),s.element=C,l._id===o?Z(l,C,s):C[0]._fci=i,F(l,C));for(z(k,n,Z),i=0;i<T;i++)(C=(s=n[i]).element)&&(s.vsides=L(C,!0),s.hsides=O(C,!0),(E=C.find(".fc-event-title")).length&&(s.contentTop=E[0].offsetTop));for(i=0;i<T;i++)(C=(s=n[i]).element)&&(C[0].style.width=Math.max(0,s.outerWidth-s.hsides)+"px",S=Math.max(0,s.outerHeight-s.vsides),C[0].style.height=S+"px",l=s.event,s.contentTop!==e&&S-s.contentTop<10&&(C.find("div.fc-event-time").text($(l.start,r("timeFormat"))+" - "+l.title),C.find("div.fc-event-title").remove()),a("eventAfterRender",l,l,C))}(function(e){var n,r,a,o,i,s=S(),l=h(),c=v(),u=t.map(e,G),f=[];for(r=0;r<s;r++)for(D(n=M(0,r),l),i=K(i=J(e,u,n,D(C(n),c-l))),a=0;a<i.length;a++)(o=i[a]).col=r,f.push(o);return f}(u),o)},n.clearEvents=function(){u().empty(),f().empty()},n.slotSegHtml=U,it.call(n);var r=n.opt,a=n.trigger,o=n.isEventDraggable,i=n.isEventResizable,s=n.eventEnd,l=n.eventElementHandlers,c=n.setHeight,u=n.getDaySegmentContainer,f=n.getSlotSegmentContainer,d=n.getHoverListener,v=n.getMaxMinute,h=n.getMinMinute,p=n.timePosition,m=n.getIsCellAllDay,w=n.colContentLeft,b=n.colContentRight,M=n.cellToDate,S=n.getColCnt,T=n.getColWidth,x=n.getSnapHeight,k=n.getSnapMinutes,H=n.getSlotContainer,F=n.reportEventElement,R=n.showEvents,A=n.hideEvents,_=n.eventDrop,P=n.eventResize,q=n.renderDayOverlay,Y=n.clearOverlays,B=n.renderDayEvents,I=n.calendar,$=I.formatDate,X=I.formatDates;function J(t,e,n,r){var a,o,i,s,l,c,u,f,d=[],v=t.length;for(a=0;a<v;a++)i=(o=t[a]).start,(s=e[a])>n&&i<r&&(i<n?(l=C(n),u=!1):(l=i,u=!0),s>r?(c=C(r),f=!1):(c=s,f=!0),d.push({event:o,start:l,end:c,isStart:u,isEnd:f}));return d.sort(at)}function G(t){return t.end?C(t.end):D(C(t.start),r("defaultEventMinutes"))}function U(t,e){var n="<",a=t.url,s=V(t,r),l=["fc-event","fc-event-vert"];return o(t)&&l.push("fc-event-draggable"),e.isStart&&l.push("fc-event-start"),e.isEnd&&l.push("fc-event-end"),l=l.concat(t.className),t.source&&(l=l.concat(t.source.className||[])),n+=a?"a href='"+j(t.url)+"'":"div",n+=" class='"+l.join(" ")+"' style='position:absolute;top:"+e.top+"px;left:"+e.left+"px;"+s+"'><div class='fc-event-inner'><div class='fc-event-time'>"+j(X(t.start,t.end,r("timeFormat")))+"</div><div class='fc-event-title'>"+j(t.title||"")+"</div></div><div class='fc-event-bg'></div>",e.isEnd&&i(t)&&(n+="<div class='ui-resizable-handle ui-resizable-s'>=</div>"),n+="</"+(a?"a":"div")+">"}function Z(t,e,c){var u=e.find("div.fc-event-time");o(t)&&function(t,e,o){var i,s,l,c,u,f,d,v,h,g,p,w=n.getCoordinateGrid(),b=S(),H=T(),F=x(),z=k();function W(){Y(),l&&(u?(o.hide(),e.draggable("option","grid",null),q(y(C(t.start),h),y(N(t),h))):(O(g),o.css("display",""),e.draggable("option","grid",[H,F])))}function O(e){var n,a=D(C(t.start),e);t.end&&(n=D(C(t.end),e)),o.text(X(a,n,r("timeFormat")))}e.draggable({scroll:!1,grid:[H,F],axis:1==b&&"y",opacity:r("dragOpacity"),revertDuration:r("dragRevertDuration"),start:function(n,r){a("eventDragStart",e,t,n,r),A(t,e),w.build(),i=e.position(),s=w.cell(n.pageX,n.pageY),l=c=!0,u=f=m(s),d=v=0,h=0,g=p=0},drag:function(t,n){var r=w.cell(t.pageX,t.pageY);if(l=!!r){if(u=m(r),(d=Math.round((n.position.left-i.left)/H))!=v){var a=M(0,s.col),o=s.col+d;o=Math.max(0,o),o=Math.min(b-1,o);var y=M(0,o);h=E(y,a)}u||(g=Math.round((n.position.top-i.top)/F)*z)}l==c&&u==f&&d==v&&g==p||(W(),c=l,f=u,v=d,p=g),e.draggable("option","revert",!l)},stop:function(n,r){Y(),a("eventDragStop",e,t,n,r),l&&(u||h||g)?_(this,t,h,u?0:g,u,n,r):(l=!0,u=!1,d=0,h=0,g=0,W(),e.css("filter",""),e.css(i),R(t,e))}})}(t,e,u),c.isEnd&&i(t)&&function(t,e,n){var o,i,l=x(),c=k();e.resizable({handles:{s:".ui-resizable-handle"},grid:l,start:function(n,r){o=i=0,A(t,e),a("eventResizeStart",this,t,n,r)},resize:function(a,u){(o=Math.round((Math.max(l,e.height())-u.originalSize.height)/l))!=i&&(n.text(X(t.start,o||t.end?D(s(t),c*o):null,r("timeFormat"))),i=o)},stop:function(n,r){a("eventResizeStop",this,t,n,r),o?P(this,t,0,c*o,n,r):R(t,e)}})}(t,e,u),l(t,e)}n.draggableDayEvent=function(t,e,n){var o,i,s,l=n.isStart,c=!0,u=d(),f=T(),v=x(),p=k(),m=h();function w(){c||(e.width(o).height("").draggable("option","grid",null),c=!0)}e.draggable({opacity:r("dragOpacity","month"),revertDuration:r("dragRevertDuration"),start:function(n,d){a("eventDragStart",e,t,n,d),A(t,e),o=e.width(),u.start((function(n,a){if(Y(),n){i=!1;var o=M(0,a.col),u=M(0,n.col);s=E(u,o),n.row?l?c&&(e.width(f-10),W(e,v*Math.round((t.end?(t.end-t.start)/g:r("defaultEventMinutes"))/p)),e.draggable("option","grid",[f,1]),c=!1):i=!0:(q(y(C(t.start),s),y(N(t),s)),w()),i=i||c&&!s}else w(),i=!0;e.draggable("option","revert",i)}),n,"drag")},stop:function(n,r){if(u.stop(),Y(),a("eventDragStop",e,t,n,r),i)w(),e.css("filter",""),R(t,e);else{var o=0;c||(o=Math.round((e.offset().top-H().offset().top)/v)*p+m-(60*t.start.getHours()+t.start.getMinutes())),_(this,t,s,o,c,n,r)}}})}}function K(t){var e,n=function(t){var e,n,r,a=[];for(e=0;e<t.length;e++){for(n=t[e],r=0;r<a.length&&nt(n,a[r]).length;r++);(a[r]||(a[r]=[])).push(n)}return a}(t),r=n[0];if(function(t){var e,n,r,a,o;for(e=0;e<t.length;e++)for(n=t[e],r=0;r<n.length;r++)for((a=n[r]).forwardSegs=[],o=e+1;o<t.length;o++)nt(a,t[o],a.forwardSegs)}(n),r){for(e=0;e<r.length;e++)tt(r[e]);for(e=0;e<r.length;e++)et(r[e],0,0)}return function(t){var e,n,r,a=[];for(e=0;e<t.length;e++)for(n=t[e],r=0;r<n.length;r++)a.push(n[r]);return a}(n)}function tt(t){var n,r,a=t.forwardSegs,o=0;if(t.forwardPressure===e){for(n=0;n<a.length;n++)tt(r=a[n]),o=Math.max(o,1+r.forwardPressure);t.forwardPressure=o}}function et(t,n,r){var a,o=t.forwardSegs;if(t.forwardCoord===e)for(o.length?(o.sort(rt),et(o[0],n+1,r),t.forwardCoord=o[0].backwardCoord):t.forwardCoord=1,t.backwardCoord=t.forwardCoord-(t.forwardCoord-r)/(n+1),a=0;a<o.length;a++)et(o[a],0,t.forwardCoord)}function nt(t,e,n){n=n||[];for(var r=0;r<e.length;r++)a=t,o=e[r],a.end>o.start&&a.start<o.end&&n.push(e[r]);var a,o;return n}function rt(t,e){return e.forwardPressure-t.forwardPressure||(t.backwardCoord||0)-(e.backwardCoord||0)||at(t,e)}function at(t,e){return t.start-e.start||e.end-e.start-(t.end-t.start)||(t.event.title||"").localeCompare(e.event.title)}function ot(n,r,a){var o=this;o.element=n,o.calendar=r,o.name=a,o.opt=v,o.trigger=h,o.isEventDraggable=function(t){var e=t.source||{};return J(t.startEditable,e.startEditable,v("eventStartEditable"),t.editable,e.editable,v("editable"))&&!v("disableDragging")},o.isEventResizable=function(t){var e=t.source||{};return J(t.durationEditable,e.durationEditable,v("eventDurationEditable"),t.editable,e.editable,v("editable"))&&!v("disableResizing")},o.setEventData=function(t){c={};var e,n,r=t.length;for(e=0;e<r;e++)n=t[e],c[n._id]?c[n._id].push(n):c[n._id]=[n]},o.clearEventData=function(){c={},u={},f=[]},o.eventEnd=g,o.reportEventElement=function(t,e){f.push({event:t,element:e}),u[t._id]?u[t._id].push(e):u[t._id]=[e]},o.triggerEventDestroy=function(){t.each(f,(function(t,e){o.trigger("eventDestroy",e.event,e.event,e.element)}))},o.eventElementHandlers=function(t,e){e.click((function(n){if(!e.hasClass("ui-draggable-dragging")&&!e.hasClass("ui-resizable-resizing"))return h("eventClick",this,t,n)})).hover((function(e){h("eventMouseover",this,t,e)}),(function(e){h("eventMouseout",this,t,e)}))},o.showEvents=function(t,e){p(t,e,"show")},o.hideEvents=function(t,e){p(t,e,"hide")},o.eventDrop=function(t,e,n,r,a,o,i){var s=e.allDay,u=e._id;m(c[u],n,r,a),h("eventDrop",t,e,n,r,a,(function(){m(c[u],-n,-r,s),l(u)}),o,i),l(u)},o.eventResize=function(t,e,n,r,a,o){var i=e._id;w(c[i],n,r),h("eventResize",t,e,n,r,(function(){w(c[i],-n,-r),l(i)}),a,o),l(i)};var i=o.defaultEventEnd,s=r.normalizeEvent,l=r.reportEventChange,c={},u={},f=[],d=r.options;function v(e,n){var r=d[e];return t.isPlainObject(r)?B(r,n||a):r}function h(t,e){return r.trigger.apply(r,[t,e||o].concat(Array.prototype.slice.call(arguments,2),[o]))}function g(t){return t.end?C(t.end):i(t)}function p(t,e,n){var r,a=u[t._id],o=a.length;for(r=0;r<o;r++)e&&a[r][0]==e[0]||a[r][n]()}function m(t,n,r,a){r=r||0;for(var o,i=t.length,l=0;l<i;l++)o=t[l],a!==e&&(o.allDay=a),D(y(o.start,n,!0),r),o.end&&(o.end=D(y(o.end,n,!0),r)),s(o,d)}function w(t,e,n){n=n||0;for(var r,a=t.length,o=0;o<a;o++)(r=t[o]).end=D(y(g(r),e,!0),n),s(r,d)}o.isHiddenDay=function(t){"object"==typeof t&&(t=t.getDay());return S[t]},o.skipHiddenDays=function(t,e,n){e=e||1;for(;S[(t.getDay()+(n?e:0)+7)%7];)y(t,e)},o.getCellsPerWeek=function(){return b},o.dateToCell=function(t){return A(z(N(t)))},o.dateToDayOffset=N,o.dayOffsetToCellOffset=z,o.cellOffsetToCell=A,o.cellToDate=function(){var t=H.apply(null,arguments);return R(F(t))},o.cellToCellOffset=H,o.cellOffsetToDayOffset=F,o.dayOffsetToDate=R,o.rangeToSegments=function(t,e){for(var n=o.getRowCnt(),r=o.getColCnt(),a=[],i=N(t),s=N(e),l=z(i),c=z(s)-1,u=0;u<n;u++){var f=u*r,d=f+r-1,v=Math.max(l,f),h=Math.min(c,d);if(v<=h){var g=A(v),p=A(h),m=[g.col,p.col].sort(),y=F(v)==i,w=F(h)+1==s;a.push({row:u,leftCol:m[0],rightCol:m[1],isStart:y,isEnd:w})}}return a};var b,M=v("hiddenDays")||[],S=[],T=[],x=[],k=v("isRTL");function H(t,e){var n=o.getColCnt(),r=k?-1:1,a=k?n-1:0;return"object"==typeof t&&(e=t.col,t=t.row),t*n+(e*r+a)}function F(t){var e=o.visStart.getDay();return t+=T[e],7*Math.floor(t/b)+x[(t%b+b)%b]-e}function R(t){var e=C(o.visStart);return y(e,t),e}function N(t){return E(t,o.visStart)}function z(t){var e=o.visStart.getDay();return t+=e,Math.floor(t/7)*b+T[(t%7+7)%7]-T[e]}function A(t){var e=o.getColCnt(),n=k?-1:1,r=k?e-1:0;return{row:Math.floor(t/e),col:(t%e+e)%e*n+r}}!function(){!1===v("weekends")&&M.push(0,6);for(var e=0,n=0;e<7;e++)T[e]=n,S[e]=-1!=t.inArray(e,M),S[e]||(x[n]=e,n++);if(!(b=n))throw"invalid hiddenDays"}()}function it(){var e=this;e.renderDayEvents=function(t,e){var n=_(t,!1,!0);lt(n,(function(t,e){s(t.event,e)})),function(t,e){var n=b();lt(t,(function(t,n,r){var a=t.event;a._id===e?$(a,n,t):n[0]._fci=r})),z(n,t,$)}(n,e),lt(n,(function(t,e){r("eventAfterRender",t.event,t.event,e)}))},e.draggableDayEvent=function(t,e){var a,o=k();e.draggable({delay:50,opacity:n("dragOpacity"),revertDuration:n("dragRevertDuration"),start:function(n,i){r("eventDragStart",e,t,n,i),u(t,e),o.start((function(n,r,o,i){if(e.draggable("option","revert",!n||!o&&!i),T(),n){var s=F(r),l=F(n);a=E(l,s),S(y(C(t.start),a),y(N(t),a))}else a=0}),n,"drag")},stop:function(n,i){o.stop(),T(),r("eventDragStop",e,t,n,i),a?f(this,t,a,0,t.allDay,n,i):(e.css("filter",""),c(t,e))}})},e.resizableDayEvent=function(e,a,o){var s=n("isRTL")?"w":"e",l=a.find(".ui-resizable-"+s),f=!1;I(a),a.mousedown((function(t){t.preventDefault()})).click((function(t){f&&(t.preventDefault(),t.stopImmediatePropagation())})),l.mousedown((function(n){if(1==n.which){f=!0;var l,g,p=k(),m=(v(),h(),a.css("top")),w=t.extend({},e),D=L(W(e.start));x(),t("body").css("cursor",s+"-resize").one("mouseup",(function(n){r("eventResizeStop",this,e,n),t("body").css("cursor",""),p.stop(),T(),l&&d(this,e,l,0,n);setTimeout((function(){f=!1}),0)})),r("eventResizeStart",this,e,n),p.start((function(n,r){if(n){var a=R(r),f=R(n);if(f=Math.max(f,D),l=A(f)-A(a)){w.end=y(i(e),l,!0);var d=g;g=function(t,e,n){var r=_([t],!0,!1),a=[];return lt(r,(function(t,r){t.row===e&&r.css("top",n),a.push(r[0])})),a}(w,o.row,m),(g=t(g)).find("*").css("cursor",s+"-resize"),d&&d.remove(),u(e)}else g&&(c(e),g.remove(),g=null);T(),S(e.start,y(N(e),l))}}),n)}}))};var n=e.opt,r=e.trigger,a=e.isEventDraggable,o=e.isEventResizable,i=e.eventEnd,s=e.reportEventElement,l=e.eventElementHandlers,c=e.showEvents,u=e.hideEvents,f=e.eventDrop,d=e.eventResize,v=e.getRowCnt,h=e.getColCnt,g=(e.getColWidth,e.allDayRow),p=e.colLeft,m=e.colRight,w=e.colContentLeft,D=e.colContentRight,b=(e.dateToCell,e.getDaySegmentContainer),M=e.calendar.formatDates,S=e.renderDayOverlay,T=e.clearOverlays,x=e.clearSelection,k=e.getHoverListener,H=e.rangeToSegments,F=e.cellToDate,R=e.cellToCellOffset,A=e.cellOffsetToDayOffset,W=e.dateToDayOffset,L=e.dayOffsetToCellOffset;function _(e,a,o){var i,s,l=b(),c=a?t("<div/>"):l,u=function(t){for(var e=[],n=0;n<t.length;n++){var r=P(t[n]);e.push.apply(e,r)}return e}(e);return function(t){for(var e=n("isRTL"),r=0;r<t.length;r++){var a=t[r],o=(e?a.isEnd:a.isStart)?w:p,i=(e?a.isStart:a.isEnd)?D:m,s=o(a.leftCol),l=i(a.rightCol);a.left=s,a.outerWidth=l-s}}(u),i=function(t){for(var e="",n=0;n<t.length;n++)e+=Y(t[n]);return e}(u),c[0].innerHTML=i,s=c.children(),a&&l.append(s),function(e,n){for(var a=0;a<e.length;a++){var o=e[a],i=o.event,s=n.eq(a),l=r("eventRender",i,i,s);!1===l?s.remove():(l&&!0!==l&&(l=t(l).css({position:"absolute",left:o.left}),s.replaceWith(l),s=l),o.element=s)}}(u,s),lt(u,(function(t,e){t.hsides=O(e,!0)})),lt(u,(function(t,e){e.width(Math.max(0,t.outerWidth-t.hsides))})),lt(u,(function(t,e){t.outerHeight=e.outerHeight(!0)})),function(t,e){var n=function(t){for(var e=v(),n=h(),r=[],a=function(t){var e,n,r,a=v(),o=[];for(e=0;e<t.length;e++)r=(n=t[e]).row,n.element&&(o[r]?o[r].push(n):o[r]=[n]);for(r=0;r<a;r++)o[r]=B(o[r]||[]);return o}(t),o=0;o<e;o++){for(var i=a[o],s=[],l=0;l<n;l++)s.push(0);for(var c=0;c<i.length;c++){var u=i[c];u.top=q(s.slice(u.leftCol,u.rightCol+1));for(l=u.leftCol;l<=u.rightCol;l++)s[l]=u.top+u.outerHeight}r.push(q(s))}return r}(t),r=function(){var t,e=v(),n=[];for(t=0;t<e;t++)n[t]=g(t).find("div.fc-day-content > div");return n}(),a=[];if(e)for(var o=0;o<r.length;o++)r[o].height(n[o]);for(o=0;o<r.length;o++)a.push(r[o].position().top);lt(t,(function(t,e){e.css("top",a[t.row]+t.top)}))}(u,o),u}function P(t){for(var e=t.start,n=N(t),r=H(e,n),a=0;a<r.length;a++)r[a].event=t;return r}function Y(t){var e="",r=n("isRTL"),i=t.event,s=i.url,l=["fc-event","fc-event-hori"];a(i)&&l.push("fc-event-draggable"),t.isStart&&l.push("fc-event-start"),t.isEnd&&l.push("fc-event-end"),l=l.concat(i.className),i.source&&(l=l.concat(i.source.className||[]));var c=V(i,n);return e+=s?"<a href='"+j(s)+"'":"<div",e+=" class='"+l.join(" ")+"' style='position:absolute;left:"+t.left+"px;"+c+"'><div class='fc-event-inner'>",!i.allDay&&t.isStart&&(e+="<span class='fc-event-time'>"+j(M(i.start,i.end,n("timeFormat")))+"</span>"),e+="<span class='fc-event-title'>"+j(i.title||"")+"</span></div>",t.isEnd&&o(i)&&(e+="<div class='ui-resizable-handle ui-resizable-"+(r?"w":"e")+"'>&nbsp;&nbsp;&nbsp;</div>"),e+="</"+(s?"a":"div")+">"}function B(t){for(var e=[],n=function(t){t.sort(ct);for(var e=[],n=0;n<t.length;n++){for(var r=t[n],a=0;a<e.length&&st(r,e[a]);a++);e[a]?e[a].push(r):e[a]=[r]}return e}(t),r=0;r<n.length;r++)e.push.apply(e,n[r]);return e}function $(t,n,r){a(t)&&e.draggableDayEvent(t,n,r),r.isEnd&&o(t)&&e.resizableDayEvent(t,n,r),l(t,n)}}function st(t,e){for(var n=0;n<e.length;n++){var r=e[n];if(r.leftCol<=t.rightCol&&r.rightCol>=t.leftCol)return!0}return!1}function lt(t,e){for(var n=0;n<t.length;n++){var r=t[n],a=r.element;a&&e(r,a,n)}}function ct(t,e){return e.rightCol-e.leftCol-(t.rightCol-t.leftCol)||e.event.allDay-t.event.allDay||t.event.start-e.event.start||(t.event.title||"").localeCompare(e.event.title)}function ut(){var e=this;e.select=function(t,e,n){l(),e||(e=a(t,n));o(t,e,n),c(t,e,n)},e.unselect=l,e.reportSelection=c,e.daySelectionMousedown=function(r){var a=e.cellToDate,s=e.getIsCellAllDay,u=e.getHoverListener(),f=e.reportDayClick;if(1==r.which&&n("selectable")){l(r);var d;u.start((function(t,e){i(),t&&s(t)?(d=[a(e),a(t)].sort(P),o(d[0],d[1],!0)):d=null}),r),t(document).one("mouseup",(function(t){u.stop(),d&&(+d[0]==+d[1]&&f(d[0],!0,t),c(d[0],d[1],!0,t))}))}};var n=e.opt,r=e.trigger,a=e.defaultSelectionEnd,o=e.renderSelection,i=e.clearSelection,s=!1;function l(t){s&&(s=!1,i(),r("unselect",null,t))}function c(t,e,n,a){s=!0,r("select",null,t,e,n,a)}n("selectable")&&n("unselectAuto")&&t(document).mousedown((function(e){var r=n("unselectCancel");r&&t(e.target).parents(r).length||l(e)}))}function ft(){this.renderOverlay=function(r,a){var o=n.shift();o||(o=t("<div class='fc-cell-overlay' style='position:absolute;z-index:3'/>"));o[0].parentNode!=a[0]&&o.appendTo(a);return e.push(o.css(r).show()),o},this.clearOverlays=function(){var t;for(;t=e.shift();)n.push(t.hide().unbind())};var e=[],n=[]}function dt(t){var e,n,r=this;r.build=function(){t(e=[],n=[])},r.cell=function(t,r){var a,o=e.length,i=n.length,s=-1,l=-1;for(a=0;a<o;a++)if(r>=e[a][0]&&r<e[a][1]){s=a;break}for(a=0;a<i;a++)if(t>=n[a][0]&&t<n[a][1]){l=a;break}return s>=0&&l>=0?{row:s,col:l}:null},r.rect=function(t,r,a,o,i){var s=i.offset();return{top:e[t][0]-s.top,left:n[r][0]-s.left,width:n[o][1]-n[r][0],height:e[a][1]-e[t][0]}}}function vt(n){var r,a,o,i;function s(t){var r;(r=t).pageX===e&&(r.pageX=r.originalEvent.pageX,r.pageY=r.originalEvent.pageY);var s=n.cell(t.pageX,t.pageY);(!s!=!i||s&&(s.row!=i.row||s.col!=i.col))&&(s?(o||(o=s),a(s,o,s.row-o.row,s.col-o.col)):a(s,o),i=s)}this.start=function(e,l,c){a=e,o=i=null,n.build(),s(l),r=c||"mousemove",t(document).bind(r,s)},this.stop=function(){return t(document).unbind(r,s),i}}function ht(t){var n=this,r={},a={},o={};function i(e){return r[e]=r[e]||t(e)}n.left=function(t){return a[t]=a[t]===e?i(t).position().left:a[t]},n.right=function(t){return o[t]=o[t]===e?n.left(t)+i(t).width():o[t]},n.clear=function(){r={},a={},o={}}}a.dateFormatters=R,a.applyAll=X,o.month=function(t,e){var n=this;n.render=function(t,e){e&&(m(t,e),t.setDate(1));var l=r("firstDay"),c=C(t,!0);c.setDate(1);var u=m(C(c),1),f=C(c);y(f,-(f.getDay()-l+7)%7),o(f);var d=C(u);y(d,(7-d.getDay()+l)%7),o(d,-1,!0);var v=i(),h=Math.round(E(d,f)/7);"fixed"==r("weekMode")&&(y(d,7*(6-h)),h=6);n.title=s(c,r("titleFormat")),n.start=c,n.end=u,n.visStart=f,n.visEnd=d,a(h,v,!0)},G.call(n,t,e,"month");var r=n.opt,a=n.renderBasic,o=n.skipHiddenDays,i=n.getCellsPerWeek,s=e.formatDate},o.basicWeek=function(t,e){var n=this;n.render=function(t,e){e&&y(t,7*e);var l=y(C(t),-(t.getDay()-r("firstDay")+7)%7),c=y(C(l),7),u=C(l);o(u);var f=C(c);o(f,-1,!0);var d=i();n.start=l,n.end=c,n.visStart=u,n.visEnd=f,n.title=s(u,y(C(f),-1),r("titleFormat")),a(1,d,!1)},G.call(n,t,e,"basicWeek");var r=n.opt,a=n.renderBasic,o=n.skipHiddenDays,i=n.getCellsPerWeek,s=e.formatDates},o.basicDay=function(t,e){var n=this;n.render=function(t,e){e&&y(t,e);o(t,e<0?-1:1);var s=C(t,!0),l=y(C(s),1);n.title=i(t,r("titleFormat")),n.start=n.visStart=s,n.end=n.visEnd=l,a(1,1,!1)},G.call(n,t,e,"basicDay");var r=n.opt,a=n.renderBasic,o=n.skipHiddenDays,i=e.formatDate},i({weekMode:"fixed"}),o.agendaWeek=function(t,e){var n=this;n.render=function(t,e){e&&y(t,7*e);var l=y(C(t),-(t.getDay()-r("firstDay")+7)%7),c=y(C(l),7),u=C(l);o(u);var f=C(c);o(f,-1,!0);var d=i();n.title=s(u,y(C(f),-1),r("titleFormat")),n.start=l,n.end=c,n.visStart=u,n.visEnd=f,a(d)},Z.call(n,t,e,"agendaWeek");var r=n.opt,a=n.renderAgenda,o=n.skipHiddenDays,i=n.getCellsPerWeek,s=e.formatDates},o.agendaDay=function(t,e){var n=this;n.render=function(t,e){e&&y(t,e);o(t,e<0?-1:1);var s=C(t,!0),l=y(C(s),1);n.title=i(t,r("titleFormat")),n.start=n.visStart=s,n.end=n.visEnd=l,a(1)},Z.call(n,t,e,"agendaDay");var r=n.opt,a=n.renderAgenda,o=n.skipHiddenDays,i=e.formatDate},i({allDaySlot:!0,allDayText:"all-day",firstHour:6,slotMinutes:30,defaultEventMinutes:120,axisFormat:"h(:mm)tt",timeFormat:{agenda:"h:mm{ - h:mm}"},dragOpacity:{agenda:.5},minTime:0,maxTime:24,slotEventOverlap:!0})}(jQuery);